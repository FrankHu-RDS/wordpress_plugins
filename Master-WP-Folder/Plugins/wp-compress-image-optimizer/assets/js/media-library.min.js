jQuery(document).ready(function(f){f(".tooltip").tooltipster({maxWidth:"300"});f(".dropdown-toggle").on("click",function(){var g=f(this);var h=f(this).parent();f(h).toggleClass("open")});f("a",".recompress-form .wp-ic-select-box").on("click",function(j){j.preventDefault();var i=f(this);var g=f(this).parent();var h=f(g).parent();var k=f(h).parent();if(f(k).hasClass("disabled")){return false}f("li",h).removeClass("current");f(i).parent().addClass("current")});function d(){f.ajax({type:"POST",url:ajaxurl,data:{action:"wps_ic_library_compress_next_in_queue"},success:function(g){if(g.success==false||g.success=="false"){}else{setTimeout(function(){d()},2500)}},error:function(g){setTimeout(function(){d()},2500)}})}function a(){jQuery.post(ajaxurl,{action:"get_library_queued_images"},function(g){if(g.success=="true"||g.success==true){d()}b();e()})}function b(){jQuery.post(ajaxurl,{action:"get_library_compressed_images"},function(g){if(g.data=="compressing"){return true}console.log("Compressed images: ");console.log(g.data);jQuery.each(g.data,function(h,j){var m=jQuery("tr#post-"+h);var k=jQuery("div#wp-ic-image-"+h);var l=jQuery("div#wp-ic-image-actions-"+h);jQuery(k).html(j.info);jQuery(l).html(j.actions);jQuery("#wp-ic-image-loading-"+h).hide();jQuery(l).show()})})}function e(){jQuery.post(ajaxurl,{action:"get_library_restored_images"},function(g){if(g.data=="restoring"){return true}jQuery.each(g.data,function(h,j){var m=jQuery("tr#post-"+h);var k=jQuery("div#wp-ic-image-"+h);var l=jQuery("div#wp-ic-image-actions-"+h);jQuery(k).html(j.info);jQuery(l).html(j.actions);jQuery("#wp-ic-image-loading-"+h).hide();jQuery(l).show()})})}f(".wps-ic-restore-single").on("click",function(l){l.preventDefault();var i=f(".wps-ic-restore-single");f(i).attr("disabled","disabled");setTimeout(function(){f(i).removeAttr("disabled")},350);var h=f(this);var g=f(h).data("image_id");var k=f(h).data("type");var j=f("#wp-ic-image-actions-"+g);var m=f("#wp-ic-image-loading-"+g);f(j).hide();f(m).show();f.ajaxSetup({async:true,cache:false});f.post(ajaxurl,{action:"wps_ic_restore_single_btn",attachment_id:g,type:k},function(n){if(n.success==true){f.ajax({type:"POST",url:ajaxurl,data:{action:"wps_ic_compress_restore_thumbnails",attachment:g},success:function(o){f.ajax({type:"POST",url:ajaxurl,data:{action:"wps_ic_compress_next_in_queue"},success:function(p){a()},error:function(p){}})}})}})});f(".wps-ic-compare-single").on("click",function(h){h.preventDefault();var g=f(this).data("image_id");Swal.fire({title:"",html:jQuery("#ic_compare_loading").html(),width:900,customClass:"compare-popup-container",showCloseButton:true,showCancelButton:false,showConfirmButton:false,onOpen:function(){f.ajax({type:"POST",url:ajaxurl,data:{action:"wps_ic_compare_results",attachmentID:g},success:function(j){if(j.success){var i=jQuery("#ic_compare_popup");f(".left-option img.original",i).attr("src",j.data.original);f(".left-option span.original",i).html(""+j.data.original_size+"");f(".right-option img.compressed",i).attr("src",j.data.compressed);f(".right-option span.compressed",i).html(""+j.data.compressed_size+"");f(".results",i).html(""+j.data.results+"");f(".mb-savings",i).html(""+j.data.mb_savings+"")}Swal.fire({title:"",html:jQuery("#ic_compare_popup").html(),width:900,customClass:"compare-popup-container",showCloseButton:true,showCancelButton:false,showConfirmButton:false,onOpen:function(){},onClose:function(){}})}})},onClose:function(){}});return false});f(".wps-ic-recompress-single").on("click",function(l){l.preventDefault();var g=f(this).data("image_id");var i="";var m="";var j=g;var h=true;var k=0;Swal.fire({title:"",html:jQuery("#ic_recompress_loading").html(),width:900,customClass:"compare-popup-container",showCloseButton:true,showCancelButton:false,showConfirmButton:false,onOpen:function(){f.ajax({type:"POST",url:ajaxurl,data:{action:"wps_ic_recompress_init",attachmentID:g},success:function(o){if(o.success){var n=jQuery("#ic_recompress_popup");f(".left-option img.original",n).attr("src",o.data.original);f(".left-option span.original",n).html(""+o.data.original_size+"");f(".right-option img.compressed",n).attr("src",o.data.compressed);f(".right-option span.compressed",n).html(""+o.data.compressed_size+"");f(".results",n).html(""+o.data.results+"");f(".mb-savings",n).html(""+o.data.mb_savings+"");m=o.data.original;i=o.data.compress_quality}jQuery(".recompress-form .wp-ic-select-box a").parent().removeClass("current");jQuery('.recompress-form .wp-ic-select-box a[data-optimization_level="'+i+'"]').parent().addClass("current");Swal.fire({title:"",html:jQuery("#ic_recompress_popup").html(),width:900,customClass:"compare-popup-container",showCloseButton:true,showCancelButton:false,showConfirmButton:false,onOpen:function(){var p=f("#swal2-content");k=jQuery('input[name="resize_size"]',p).val();h=jQuery('input[name="resize"]',p).is(":checked");jQuery(".recompress-form .wp-ic-select-box a",p).click(function(t){t.preventDefault();var s=f(this);var q=f(this).parent();var r=f(q).parent();var u=f(r).parent();if(f(u).hasClass("disabled")){return false}f("li",r).removeClass("current");f(s).parent().addClass("current");i=f(s).data("optimization_level")});jQuery(".wp-ic-ajax-checkbox-v2",p).click(function(v){v.preventDefault();var s=f(this).parent().parent();var q=f("input",s);var r=f(q).data("setting_name");var u=f(q).data("setting_value");var t=f(q).is(":checked");u=f(q).data("setting_value");if(f(q).is(":checked")){f(q).removeAttr("checked");t=false;h=false}else{f(q).attr("checked","checked");t=true;h=true}});jQuery(".recompress-form .button-recompress",p).click(function(r){r.preventDefault();var q=f(".recompress-form");f(q).hide();f(".recompress-results").hide();f(".recompress-loading").show();k=jQuery('input[name="resize_size"]',p).val();h=jQuery('input[name="resize"]',p).is(":checked");f.ajaxSetup({async:true,cache:false});f.post(ajaxurl,{action:"wps_ic_single_recompress",attachment_id:j,compress_quality:i,resize:h,resize_size:k},function(t){if(t.success==true){var s=f("#post-"+j);var v=f(".wp-ic-image-info",s);var u=f(".wps-ic-media-actions",s);f.ajax({type:"POST",url:ajaxurl,data:{action:"wps_ic_recompress_init",attachmentID:g},success:function(w){if(w.success){f(".wps-ic-compressed>h5:first-of-type",v).html(w.data.percentage+"%");f(".wps-ic-compressed>h5:nth-of-type(2)",v).html(w.data.mb_savings);f(".wps-ic-weight",u).html('<span class="strike">'+w.data.original_size+"</span>");f(".wps-ic-size",u).html("<span>"+w.data.dimmensions+"</span>");f(".wps-ic-size-compressed",u).html("<span>"+w.data.compressed_size+"</span>");f(".left-option img.original",p).attr("src",w.data.original);f(".left-option span.original",p).html(""+w.data.original_size+"");f(".right-option img.compressed",p).attr("src",w.data.compressed);f(".right-option span.compressed",p).html(""+w.data.compressed_size+"");f(".results",p).html(""+w.data.results+"");f(".mb-savings",p).html(""+w.data.mb_savings+"");f(q).show();f(".recompress-results").show();f(".recompress-loading").hide()}}})}else{f(q).show()}})})},onClose:function(){}})}})},onClose:function(){}});return false});f(".wps-ic-compress-single").on("click",function(k){k.preventDefault();var i=f(".wps-ic-compress-single");f(i).attr("disabled","disabled");setTimeout(function(){f(i).removeAttr("disabled")},350);var h=f(this);var g=f(h).data("image_id");var j=f("#wp-ic-image-actions-"+g);var l=f("#wp-ic-image-loading-"+g);f(j).hide();f(l).show();f.ajaxSetup({async:true,cache:false});f.post(ajaxurl,{action:"wps_ic_single_compress_btn",attachment_id:g},function(m){if(m.success==true){setTimeout(function(){a()},1000);setTimeout(function(){console.log("Total thumbs :"+m.data.thumbs);console.log("Fetch Thumbnails: "+m.data.attachments);c(m.data.attachments)},3500);f.ajax({type:"POST",url:ajaxurl,data:{action:"wps_ic_compress_next_in_queue"},success:function(n){},error:function(n){}})}else{}});return false});function c(g){f.ajax({type:"POST",url:ajaxurl,data:{action:"wps_ic_compress_fetch_thumbnails",attachments:g},success:function(h){}})}});